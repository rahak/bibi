// ================================================================================
// + Slider
// --------------------------------------------------------------------------------

$Slider_Transition__Open: .01s ease;
$Slider_Transition__Close: .1s ease;

div#bibi-slider {
	& {
		overflow: hidden;
		position: relative;
		box-sizing: border-box;
		display: block;
		position: absolute;
		z-index: $GLOBAL__Slider_ZIndex;
		cursor: pointer;
		transition: $Slider_Transition__Close;
		will-change: height;
		&:after {
			content: "";
			display: block;
			box-sizing: border-box;
			position: absolute;
			z-index: 1;
			border: solid 0 $GLOBAL__Scrollbar-Track_BorderColor;
			@include size(100%);
			background: $GLOBAL__Scrollbar-Track_BackgroundColor;
		}
	}
	html.appearance-horizontal & {
		@include offset(auto, 0, 0, 0);
		@include size(
			100%,
			$GLOBAL__Scrollbar-Track_Size // to be overwritten
		);
		&:after {
			border-top-width: 1px;
		}
	}
	html.appearance-vertical & {
		@include offset(0, 0, 0, auto);
		@include size(
			$GLOBAL__Scrollbar-Track_Size, // to be overwritten
			100%
		);
		&:after {
			border-left-width: 1px;
		}
	}
	html.slider-opened & {
		overflow: visible;
		box-shadow: 0 0 16px rgba(black, 0.125);
		transition: $Slider_Transition__Open;
		&:after {
			background: rgb(222,222,222);
		}
	}
	html.slider-opened.appearance-horizontal & {
		height: $GLOBAL__Slider_Size !important;
		&:after {
			border-top-color: darken($GLOBAL__Scrollbar-Track_BackgroundColor, 20%);
			//background: linear-gradient(to top, $GLOBAL__Scrollbar-Track_BackgroundColor 0, $GLOBAL__Scrollbar-Track_BackgroundColor 16px, rgba($GLOBAL__Scrollbar-Track_BackgroundColor, .75) 100%);
			//background: linear-gradient(to top, $GLOBAL__Scrollbar-Track_BackgroundColor 0, $GLOBAL__Scrollbar-Track_BackgroundColor 16px, darken($GLOBAL__Scrollbar-Track_BackgroundColor, 10%) 100%);
		}
	}
	html.slider-opened.appearance-vertical & {
		width: $GLOBAL__Slider_Size !important;
		&:after {
			border-left-color: darken($GLOBAL__Scrollbar-Track_BackgroundColor, 20%);
			//background: linear-gradient(to left, $GLOBAL__Scrollbar-Track_BackgroundColor 0, $GLOBAL__Scrollbar-Track_BackgroundColor 16px, rgba($GLOBAL__Scrollbar-Track_BackgroundColor, .75) 100%);
			//background: linear-gradient(to left, $GLOBAL__Scrollbar-Track_BackgroundColor 0, $GLOBAL__Scrollbar-Track_BackgroundColor 16px, darken($GLOBAL__Scrollbar-Track_BackgroundColor, 10%) 100%);
		}
	}
	html.slider-sliding & {
		transition: none;
	}
	html.busy & {
		opacity: 0;
		transition: none;
	}
}


// - UI Box (Edgebar Box, Bookmap Box)
// --------------------------------------------------------------------------------

$Slider_PaddingStartEnd_SliderOpened: $GLOBAL__Scrollbar-Thumb_Size;
$Slider_PaddingBeforeAfter_SliderOpened: $GLOBAL__Scrollbar-Thumb_Size;//$GLOBAL__Icon_Size + $GLOBAL__ButtonGroup_Margin * 2;

div#bibi-slider-edgebar-box,
div#bibi-slider-bookmap-box {
	box-sizing: border-box;
	position: absolute;
	//@include offset(-100vw, -100vh);
	@include offset(0);
	z-index: 10;
	margin: auto;
	background: transparent;
	will-change: width, height;
	html.appearance-horizontal & {
		@include offset(1px, 0, auto, 0);
		height: calc(100% -    1px                                                );
		width:  calc(100% - #{       $GLOBAL__Scrollbar-Thumb_Size * 0.5     * 2 });
	}
	html.appearance-horizontal.slider-opened & {
		top: 1px + $Slider_PaddingStartEnd_SliderOpened;
		height: calc(100% - #{ 1px + $Slider_PaddingStartEnd_SliderOpened    * 2 });
		width:  calc(100% - #{       $Slider_PaddingBeforeAfter_SliderOpened * 2 });
	}
	html.appearance-vertical & {
		@include offset(0, auto, 0, 1px);
		width:  calc(100% -    1px                                                );
		height: calc(100% - #{       $GLOBAL__Scrollbar-Thumb_Size * 0.5     * 2 });
	}
	html.appearance-vertical.slider-opened & {
		left: 1px + $Slider_PaddingStartEnd_SliderOpened;
		width:  calc(100% - #{ 1px + $Slider_PaddingStartEnd_SliderOpened    * 2 });
		height: calc(100% - #{       $Slider_PaddingBeforeAfter_SliderOpened * 2 });
	}
}


// - Edgebar, Bookmap
// --------------------------------------------------------------------------------

div#bibi-slider-edgebar,
div#bibi-slider-bookmap {
	box-sizing: border-box;
	position: absolute;
	z-index: 10;
	@include offset(0);
	@include size(100%);
	margin: auto;
	will-change: width, height;
}


// - Edgebar
// --------------------------------------------------------------------------------

div#bibi-slider-edgebar {
	background: white;
}


// - Bookmap
// --------------------------------------------------------------------------------

div#bibi-slider-bookmap {
	display: flex;
	flex-wrap: nowrap;
	justify-content: space-between;
	html.appearance-ltr & { flex-direction: row; }
	html.appearance-rtl & { flex-direction: row-reverse; }
	html.appearance-ttb & { flex-direction: column; }
	box-sizing: border-box;
	position: absolute;
	z-index: 10;
	@include offset(0);
	@include size(100%);
	margin: auto;
}

	div.bookmap-spread-box,
	div.bookmap-spread,
	div.bookmap-item-box,
	span.bookmap-item,
	span.bookmap-page {
		html.appearance-horizontal & { height: 100%; }
		html.appearance-vertical   & { width: 100%; }
	}


// - . Bookmap > Spread Box
// --------------------------------------------------------------------------------

$Slider-Bookmap-SpreadBox_Color: transparent;
$Slider-Bookmap-SpreadBox_Color__Hover: rgba(steelblue, .33);

div.bookmap-spread-box {
	box-sizing: border-box;
	flex-shrink: 0;
	position: relative;
	background: $Slider-Bookmap-SpreadBox_Color;
	&.hover {
		//background: $Slider-Bookmap-SpreadBox_Color__Hover;
	}
}


// - . Bookmap > Spread Box > Spread
// --------------------------------------------------------------------------------

$Slider-Bookmap-Spread_Background: rgba(white, .5);

div.bookmap-spread {
	box-sizing: border-box;
	position: absolute;
	z-index: 1;
	@include offset(0);
	margin: auto;
	display: flex;
	flex-wrap: nowrap;
	justify-content: center;
	html.page-ltr &                                            { flex-direction: row; }
	html.page-rtl &                                            { flex-direction: row-reverse; }
	html.view-vertical div.bookmap-spread-box:not(.spreaded) & { flex-direction: column; }
	div.bookmap-spread-box.single-item-spread-before & { justify-content: flex-start; }
	div.bookmap-spread-box.single-item-spread-after &  { justify-content: flex-end; }
	align-items: center;
	//border: solid 1px white;
	//html.appearance-rtl & { transform: translateX(1px); }
	//html.appearance-ltr & { transform: translateX(-1px); }
	//html.appearance-ttb &   { transform: translateY(-1px); }
	//html.appearance-horizontal & { border-width: 0 .5px; }
	//html.appearance-vertical &   { border-width: .5px 0; }
	background: $Slider-Bookmap-Spread_Background;
}


// - . Bookmap > Spread Box > Spread > Item Box
// --------------------------------------------------------------------------------

$Slider-Bookmap-ItemBox_BorderColor__ForReflowable: rgb(216,216,216);

div.bookmap-item-box {
	box-sizing: border-box;
	flex-shrink: 0;
	position: relative;
	&.reflowable {
		display: flex;
		html.appearance-ltr & { flex-direction: row; }
		html.appearance-rtl & { flex-direction: row-reverse; }
		html.appearance-ttb & { flex-direction: column; }
		flex-wrap: nowrap;
		justify-content: flex-start;
		align-items: center;
		&:before {
			content: "";
			display: block;
			position: absolute;
			background: $Slider-Bookmap-ItemBox_BorderColor__ForReflowable;
			html.book-reflowable.appearance-horizontal & { @include size(1px, calc(100% + 2px)); top: -1px; bottom: -1px; margin: auto 0; }
			html.book-reflowable.appearance-vertical & { @include size(calc(100% + 2px), 1px); left: -1px; right: -1px; margin: 0 auto; }
			html.book-reflowable.appearance-rtl & { right: -1px; left: auto; }
			html.book-reflowable.appearance-ltr & { left: -1px; right: auto; }
			html.book-reflowable.appearance-ttb & { top: -1px; bottom: auto; }
			html:not(.slider-opened) & { display: none; }
		}
	}
}


// - . Bookmap > Spread Box > Spread > Item Box > Item
// --------------------------------------------------------------------------------

span.bookmap-item {
	/*
	box-sizing: content-box;
	display: block;
	position: absolute;
	z-index: 1;
	@include offset(0);
	margin: 0;
	padding: 0;
	@include size(100%);
	border: none 0;
	line-height: 1;
	vertical-align: top;
	*/
	display: none;
}


// - . Bookmap > Spread Box > Spread > Item Box > Page
// --------------------------------------------------------------------------------

$Slider-Bookmap-Page_Color_SliderOpened: white;
$Slider-Bookmap-Page_Color_SliderOpened__Hover: lighten(steelblue, 33%);
$Slider-Bookmap-Page_BorderColor_SliderOpened__Hover: $Slider-Bookmap-Page_Color_SliderOpened__Hover;

span.bookmap-page {
	box-sizing: border-box;
	display: block;
	z-index: 10;
	div.bookmap-item-box.reflowable & {
		position: relative;
		flex-shrink: 0;
	}
	div.bookmap-item-box.pre-paginated & {
		position: absolute;
		@include offset(0);//trbl(-1px);
		margin: auto;
		@include size(100%);
	}
	background: transparent;
	html.slider-opened & {
		background-color: $Slider-Bookmap-Page_Color_SliderOpened;
	}
	html.slider-opened &.hover {
		background-color: $Slider-Bookmap-Page_Color_SliderOpened__Hover;
		border: solid 1px $Slider-Bookmap-Page_BorderColor_SliderOpened__Hover;
	}
	/*
	div.bookmap-item-box:nth-of-type(odd) & { background: red; }
	div.bookmap-item-box:nth-of-type(even) & { background: blue; }
	div.bookmap-item-box:nth-of-type(odd) & { background: blue; }
	div.bookmap-item-box:nth-of-type(even) & { background: red; }
	*/
}


// - . Rail
// --------------------------------------------------------------------------------

$Slider-Rail_Width_SliderOpened: 3px;
$Slider-Rail-Progress_Width_SliderOpened: 3px;
$Slider-Rail_Color:                rgba(gray,      0.250);//rgba($GLOBAL__Scrollbar-Thumb_BackgroundColor, .5);
$Slider-Rail_Color__Hover:          rgba(gray,      0.250);//rgba(steelblue, 0.33);//rgba($GLOBAL__Scrollbar-Thumb_BackgroundColor, .5);
$Slider-Rail-Progress_Color:       rgba(steelblue, 1.000);//rgba($GLOBAL__Scrollbar-Thumb_BackgroundColor, .5);
$Slider-Rail-Progress_Color__Hover: rgba(steelblue, 1.000);//rgba($GLOBAL__Scrollbar-Thumb_BackgroundColor, .5);

div#bibi-slider-rail {
	& {
		content: "";
		//overflow: hidden;
		// display: none; // DO NOT SET `none` !!
		box-sizing: border-box;
		position: absolute;
		z-index: 10000;
		//@include offset(-100vh, -100vw);
		@include offset(0);
		margin: auto;
		background: $Slider-Rail_Color;
		pointer-events: none;
		transition: background-color linear .33s;
	}
	div#bibi-slider:hover & {
		background: $Slider-Rail_Color__Hover;
	}
	html.appearance-horizontal & {
		height: 0;
	}
	html.appearance-vertical & {
		width: 0;
	}
	html.slider-opened & {
		border-radius: $Slider-Rail_Width_SliderOpened / 2;
	}
	html.slider-opened.appearance-horizontal & {
		height: $Slider-Rail_Width_SliderOpened;
	}
	html.slider-opened.appearance-vertical & {
		width: $Slider-Rail_Width_SliderOpened;
	}
}

div#bibi-slider-rail-progress {
	& {
		position: absolute;
		@include size(0);
		background: $Slider-Rail-Progress_Color;
		transition: background-color linear .33s;
		will-change: transform;
	}
	div#bibi-slider:hover & {
		background: $Slider-Rail-Progress_Color__Hover;
	}
	html.appearance-horizontal & { top: -100%; bottom: -100%; margin: auto 0;                                        }
	html.appearance-rtl &        {                                             right: 0; transform-origin: 100% 50%; }
	html.appearance-ltr &        {                                             left:  0; transform-origin:   0  50%; }
	html.appearance-vertical &   { left: -100%; right: -100%; margin: 0 auto;  top:   0; transform-origin:  50%  0 ; }
	html.slider-opened & {}
	html.slider-opened.appearance-horizontal & { height: $Slider-Rail-Progress_Width_SliderOpened; }
	html.slider-opened.appearance-vertical   & { width:  $Slider-Rail-Progress_Width_SliderOpened; }
}


// - . Thumb
// --------------------------------------------------------------------------------

$Slider-Thumb-Circle_Size: $GLOBAL__Scrollbar-Thumb_Size * 2;
$Slider-Thumb-Circle_BackgroundColor: steelblue;

$Slider-Thumb-Circle_BorderColor: $Slider-Thumb-Circle_BackgroundColor;
$Slider-Thumb-Circle_BorderWidth: 0;

$Slider-Thumb-Circle-Halo_Width: 2px;
$Slider-Thumb-Circle-Halo_Color: rgba(white, .75);

div#bibi-slider-thumb {
	& {
		display: block;
		box-sizing: border-box;
		position: absolute;
		z-index: 100000;
		margin: auto;
		//pointer-events: none;
		background: transparent;
		will-change: width, height, transform, left, top;
	}
	html.appearance-horizontal & {
		top: 0; bottom: 0;
		height: $GLOBAL__Scrollbar-Thumb_Size;
	}
	html.appearance-horizontal.slider-opened & {
		height: 100%;
		cursor: col-resize;
	}
	html.appearance-vertical & {
		left: 0; right: 0;
		width: $GLOBAL__Scrollbar-Thumb_Size;
	}
	html.appearance-vertical.slider-opened & {
		width: 100%;
		cursor: row-resize;
	}
	&:before,
	&:after {
		& {
			content: "";
			display: block;
			position: absolute;
			z-index: 10;
			@include offset($GLOBAL__Scrollbar-Thumb_Size * -1);
			margin: auto;
			transition: $Slider_Transition__Close;
		}
		html.slider-opened & {
			transition: $Slider_Transition__Open;
		}
	}
	&:before {
		& {
			@include size(100%);
			border-radius: $GLOBAL__Scrollbar-Thumb_Size * 0.5;
			background: $GLOBAL__Scrollbar-Thumb_BackgroundColor;
		}
		html.appearance-horizontal & { min-width: $GLOBAL__Scrollbar-Thumb_Size; }
		html.appearance-vertical & { min-height: $GLOBAL__Scrollbar-Thumb_Size; }
		html.slider-opened & {
			transform: scale(0);
			opacity: 0;
		}
	}
	html:not(.slider-opened):not(.touch) & {
		&:hover:before  { background-color: $GLOBAL__Scrollbar-Thumb_BackgroundColor__Hover; }
		&:active:before { background-color: $GLOBAL__Scrollbar-Thumb_BackgroundColor__Active; }
	}
	&:after {
		& {
			@include offset($Slider-Thumb-Circle_Size * -1);
			@include size($Slider-Thumb-Circle_Size);
			border: solid $Slider-Thumb-Circle_BorderWidth $Slider-Thumb-Circle_BorderColor;
			border-radius: 50%;
			background: $Slider-Thumb-Circle_BackgroundColor;
			box-shadow: 0 0 0 $Slider-Thumb-Circle-Halo_Width $Slider-Thumb-Circle-Halo_Color;
		}
		html:not(.slider-opened) & {
			transform: scale(0);
			opacity: 0;
		}
	}
}