// ================================================================================
// + Menu
// --------------------------------------------------------------------------------

$Menu_BackgroundColor:         rgba(white, 0  );
$Menu_BackgroundColor__Hover:  $Menu_BackgroundColor;//rgba(white,  .9);
$Menu_BackgroundColor__Active: rgba(white, 1  );
$Menu_BorderBottomColor:         rgba(black, 0);
$Menu_BorderBottomColor__Hover:  $Menu_BorderBottomColor;
$Menu_BorderBottomColor__Active: $Menu_BorderBottomColor__Hover;
$Menu_BoxShadow__Active: 0 0 16px rgba(black, 0.125);

// Not-BookFullHeight (NotBFH) ... html:not(.book-full-height)
$NotBFH-Menu_BackgroundColor:         rgba(white, 1  );
$NotBFH-Menu_BackgroundColor__Hover:  $NotBFH-Menu_BackgroundColor;
$NotBFH-Menu_BackgroundColor__Active: $NotBFH-Menu_BackgroundColor__Hover;
$NotBFH-Menu_BorderBottomColor:         rgba(black, .05);
$NotBFH-Menu_BorderBottomColor__Hover:  $NotBFH-Menu_BorderBottomColor;
$NotBFH-Menu_BorderBottomColor__Active: $NotBFH-Menu_BorderBottomColor__Hover;
$NotBFH-Menu_BoxShadow__Active: $Menu_BoxShadow__Active;

div#bibi-menu {
	& {
		box-sizing: border-box;
		position: absolute;
		z-index: $GLOBAL__Menu_ZIndex;
		@include offset(0, 0, auto);
		left: 0;
		right: 0;
		margin: 0;
		border-bottom: solid 1px transparent;
		height: $GLOBAL__TopBar_Height;
		width: 100%;
		background: transparent;
	}
	&, & ul {
		transition: .125s linear;
	}
}

html.book-full-height {
	&                 div#bibi-menu { background-color: $Menu_BackgroundColor;         border-bottom-color: $Menu_BorderBottomColor; }
	&                 div#bibi-menu.hover,
	&.subpanel-opened div#bibi-menu { background-color: $Menu_BackgroundColor__Hover;  border-bottom-color: $Menu_BorderBottomColor__Hover; }
	&.menu-opened     div#bibi-menu { background-color: $Menu_BackgroundColor__Active; border-bottom-color: $Menu_BorderBottomColor__Active; box-shadow: $Menu_BoxShadow__Active; }
}

html:not(.book-full-height) {
	&                 div#bibi-menu { background-color: $NotBFH-Menu_BackgroundColor;         border-bottom-color: $NotBFH-Menu_BorderBottomColor; }
	&                 div#bibi-menu.hover,
	&.subpanel-opened div#bibi-menu { background-color: $NotBFH-Menu_BackgroundColor__Hover;  border-bottom-color: $NotBFH-Menu_BorderBottomColor__Hover; }
	&.menu-opened     div#bibi-menu { background-color: $NotBFH-Menu_BackgroundColor__Active; border-bottom-color: $NotBFH-Menu_BorderBottomColor__Active; box-shadow: $NotBFH-Menu_BoxShadow__Active; }
}

/*html.appearance-vertical:not(.veil-opened):not(.slider-opened) {
	&                 div#bibi-menu,
	&.panel-opened    div#bibi-menu,
	&.subpanel-opened div#bibi-menu { width: 100%; } // override by script
}*/

html.appearance-vertical:not(.veil-opened).slider-opened {
	&                 div#bibi-menu { width: calc(100% - #{$GLOBAL__Slider_Size}); }
	&.panel-opened    div#bibi-menu,
	&.subpanel-opened div#bibi-menu { width: 100%; padding-right: $GLOBAL__Slider_Size; }
}

html.without-menubar,
html.waiting-file {
	&                 div#bibi-menu { display: none !important; }
}


// - Menu-L & Menu-R
// --------------------------------------------------------------------------------

div#bibi-menu-l,
div#bibi-menu-r {
	position: relative;
	z-index: 1;
	box-sizing: border-box;
	height: 100%;
	color: white;
	transition: opacity 0.75s linear;
	ul {
		& {
			position: relative;
			padding: $GLOBAL__ButtonGroup_Margin;
			height: $GLOBAL__Icon_Size;
			opacity: 0;
			&.sticky {
				opacity: 0;
			}
			&:before {
				content: "";
				display: block;
				position: absolute;
				top: $GLOBAL__ButtonGroup_Margin;
				@include size(1px, $GLOBAL__Icon_Size);
				background: rgba(216,216,216, 0.5);
			}
			li {
				@include size($GLOBAL__Icon_Size);
				.bibi-button {
					position: relative;
					z-index: 1;
					&.hover, &.active {
						z-index: 10;
					}
					span.bibi-button-label {
						font-size: 0;
						color: transparent;
					}
				}
			}
		}
		html.waiting & {
			opacity: 0.5;
			&.sticky {
				opacity: 0.5;
			}
		}
		div#bibi-menu.hover &,
		div#bibi-menu.hot &,
		html.menu-opened &,
		html.panel-opened &,
		html.subpanel-opened &,
		html:not(.book-full-height) & {
			opacity: 1;
			&.sticky {
				opacity: 1;
			}
		}
	}
	ul.bibi-buttongroup-tiled {
		li:not(:first-child):not(:last-child) {
			.bibi-button {
				.bibi-button-iconbox {
					.bibi-icon {
						border-radius: 0;
					}
				}
			}
		}
	}
}

div#bibi-menu-l {
	float: left;
	ul {
		float: left;
		padding-left: $GLOBAL__ButtonGroup_Margin + 1px;
		&:before {
			left: 0;
		}
		&:first-child {
			padding-left: $GLOBAL__ButtonGroup_Margin;
			&:before {
				display: none;
			}
		}
		li {
			float: left;
			margin-left: $GLOBAL__ButtonGroup_Margin / 2; &:first-child { margin-left: 0; }
		}
	}
	ul.bibi-buttongroup-tiled {
		li {
			margin-left: -1px;
		}
		li:first-child:not(:last-child) {
			.bibi-button {
				.bibi-button-iconbox {
					.bibi-icon {
						border-top-right-radius: 0;
						border-bottom-right-radius: 0;
					}
				}
			}
		}
		li:last-child:not(:first-child) {
			.bibi-button {
				.bibi-button-iconbox {
					.bibi-icon {
						border-top-left-radius: 0;
						border-bottom-left-radius: 0;
					}
				}
			}
		}
	}
}

div#bibi-menu-r {
	float: right;
	ul {
		float: right;
		padding-right: $GLOBAL__ButtonGroup_Margin + 1px;
		&:before {
			right: 0;
		}
		&:first-child {
			padding-right: $GLOBAL__ButtonGroup_Margin;
			&:before {
				display: none;
			}
		}
		li {
			float: right;
			margin-right: $GLOBAL__ButtonGroup_Margin / 2; &:first-child { margin-right: 0; }
		}
	}
	ul.bibi-buttongroup-tiled {
		li {
			margin-right: -1px;
		}
		li:first-child:not(:last-child) {
			.bibi-button {
				.bibi-button-iconbox {
					.bibi-icon {
						border-top-left-radius: 0;
						border-bottom-left-radius: 0;
					}
				}
			}
		}
		li:last-child:not(:first-child) {
			.bibi-button {
				.bibi-button-iconbox {
					.bibi-icon {
						border-top-right-radius: 0;
						border-bottom-right-radius: 0;
					}
				}
			}
		}
	}
}


// - Button Behaviors
// --------------------------------------------------------------------------------

ul#bibi-buttongroup_font-size {
	html.book-pre-paginated & {
		display: none;
	}
}

ul#bibi-buttongroup_loupe {
	html.waiting &,
	html.book-reflowable & {
		display: none;
	}
}